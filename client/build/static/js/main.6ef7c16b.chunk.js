(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(82)},31:function(e,t,a){},33:function(e,t,a){},37:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),s=(a(31),a(24)),i=a(2),l=a(3),u=a(5),m=a(4),h=a(6),d=a(86),p=a(88),f=a(87),g=a(85),b={isAuthenticated:!1,authenticate:function(e){var t=this;fetch("api/users",{credentials:"include"}).then(function(a){if(200!==a.status)return!1;t.isAuthenticated=!0,"function"===typeof e&&e(a.json().user)}).catch(function(e){console.log("Error fetching authorized user.")})},signout:function(e){var t=this;fetch("api/users/logout",{method:"POST",credentials:"include"}).then(function(a){t.isAuthenticated=!1,"function"===typeof e&&e(!0)}).catch(function(t){console.log("Error logging out user."),"function"===typeof e&&e(!1)})}},E=(a(33),a(84));var v=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-white text-dark"},r.a.createElement("span",{className:"text-left mr-5 pr-5"},r.a.createElement("a",{onClick:function(){b.signout()},className:"navbar-brand text-danger",href:"/"},r.a.createElement("span",{className:"logo-1"},"MW"),"atch",r.a.createElement("span",{className:"logo-2"}))),r.a.createElement("span",{className:"ml-5 pl-5"},r.a.createElement(E.a,{className:"navbar-brand text-dark float-right",to:"/trending"},"Trending"),r.a.createElement(E.a,{className:"navbar-brand text-dark float-right",to:"/watchlist"},"Watch List"),r.a.createElement(E.a,{className:"navbar-brand text-dark float-right",to:"/search"},"Search")))},y=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onLogin;return r.a.createElement("form",{ref:function(t){return e.form=t},onSubmit:function(a){return a.preventDefault(),t({username:e.usernameElem.value,password:e.passwordElem.value})}},r.a.createElement("div",{className:"form-group container"},r.a.createElement("input",{className:"form-control",ref:function(t){return e.usernameElem=t},type:"text",name:"username",placeholder:"Enter Username"}),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",ref:function(t){return e.passwordElem=t},type:"password",name:"password",placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-white text-dark",type:"submit"},"Login")))}}]),t}(r.a.Component);a(37);var w=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"jumbotron bg-dark mb-0"},r.a.createElement("h1",{className:"text-center text-danger"},r.a.createElement("span",{className:"logo-1"},"MW"),r.a.createElement("span",{className:"logo-2"},"atch"))))},N="",j=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={redirectToReferrer:!1},a.login=function(e){console.log("Logging in "+e.username),N=e.username,fetch("api/users/login",{method:"POST",body:JSON.stringify(e),credentials:"include",headers:{"Content-Type":"application/json"}}).then(function(e){200===e.status&&b.authenticate(function(){a.setState({redirectToReferrer:!0})})}).catch(function(e){console.log("Error logging in.",e)})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/trending"}}).from;return this.state.redirectToReferrer?r.a.createElement(g.a,{to:e}):r.a.createElement("div",null,r.a.createElement("p",null,"You must log in to view the page at ",e.pathname),r.a.createElement(w,null),r.a.createElement(y,{onLogin:this.login}))}}]),t}(r.a.Component),O=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onRegister;return console.log("Register form props are: ".concat(JSON.stringify(this.props))),r.a.createElement("form",{ref:function(t){return e.form=t},onSubmit:function(a){return a.preventDefault(),t({username:e.usernameElem.value,password:e.passwordElem.value})}},r.a.createElement("div",{className:"form-group container"},r.a.createElement("input",{className:"form-control",ref:function(t){return e.usernameElem=t},type:"text",name:"username",placeholder:"Enter Username"}),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",ref:function(t){return e.passwordElem=t},type:"password",name:"password",placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-white text-dark",type:"submit"},"Register")))}}]),t}(r.a.Component),S=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={redirectToReferrer:!1,username:""},a.register=function(e){console.log("Signing up "+e.username),fetch("api/users/register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){200===e.status&&(console.log("Succesfully registered user!"),b.authenticate(function(){a.setState({redirectToReferrer:!0})}))}).catch(function(e){console.log("Error registering user.",e)})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/login"}}).from;return this.state.redirectToReferrer?r.a.createElement(g.a,{to:e}):r.a.createElement("div",{className:"bg-dark"},r.a.createElement(w,null),r.a.createElement(O,{onRegister:this.register}))}}]),t}(r.a.Component),k=a(11),x=a.n(k),C={saveShow:function(e,t){return x.a.post("/api/users/watchlist/"+e,t).then(console.log(t))},getWatchList:function(e){return x.a.get("/api/users/watchlist/"+e)},deleteShow:function(e,t){return x.a.delete("/api/users/watchlist/"+e+"/"+t)},addToPeanutGallery:function(e){return x.a.post("/api/users/peanutgallery",e)}},T=new(a(58))("0faa87ddbbef0c9919c7bc4cce783c37"),I=a(11),R={searchShows:function(e){return T.searchTv({query:e}).catch(console.error)},trendingGenre:function(e){return T.discoverTv({with_genres:e,page:1}).catch(console.error)},getImdbID:function(e){var t=this;return T.tvExternalIds({id:e}).then(function(e){return t.getImdbInfo(e.imdb_id)}).catch(console.error)},getImdbInfo:function(e){return I({method:"GET",url:"https://movie-database-imdb-alternative.p.rapidapi.com/",headers:{"content-type":"application/octet-stream","x-rapidapi-host":"movie-database-imdb-alternative.p.rapidapi.com","x-rapidapi-key":"a2f015a678msh2a0ce21581b9776p142941jsn5041963e7f65"},params:{i:e,r:"json"}}).then(function(e){return C.addToPeanutGallery({imdbID:e.data.imdbID,title:e.data.Title,posterURL:e.data.Poster,plot:e.data.Plot,actors:e.data.Actors,genre:e.data.Genre,rated:e.data.Rated,released:e.data.Released,writer:e.data.Writer,rating:e.data.imdbRating})}).catch(function(e){console.log(e)})}};a(72);var A=function(e){return r.a.createElement("button",Object.assign({},e,{role:"button",tabIndex:"0"}))};a(74);var L=function(e){return r.a.createElement("div",{className:"card mb-3"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},r.a.createElement("strong",null,e.name)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-3 text-center"},r.a.createElement("img",{src:e.poster?"http://image.tmdb.org/t/p/original".concat(e.poster):"http://www.salasardyechem.com/img/not-available.jpg",alt:"Show Poster"})),r.a.createElement("div",{className:"col-12 col-lg-9"},r.a.createElement("p",{className:"card-text"},e.summary),e.children))))};var W=function(e){return r.a.createElement("button",{onClick:function(){console.log(e.id),e.searchByGenre(e.id)},className:"genre-btn btn btn-white text-dark","data-id":e.id,role:"button",tabIndex:"0"},e.name)},D=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={shows:[],genres:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],username:""},a.saveShow=function(e,t,a,n){C.saveShow(N,{id:e,name:t,poster:a,summary:n}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})},a.searchByGenre=function(e){console.log("searching genre"),console.log(e),R.trendingGenre(e).then(function(e){console.log("genre results"),console.log(e),console.log(e.results),a.setState({shows:e.results})}).catch(function(e){return console.log(e)})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({username:this.props.match.params.username}),this.searchByGenre()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"Trending Now"),this.state.genres.map(function(t){return r.a.createElement(W,{searchByGenre:e.searchByGenre,key:t.id,id:t.id,name:t.name})}),this.state.shows.map(function(t){return r.a.createElement(L,{key:t.id,id:t.id,name:t.name,poster:t.poster_path,summary:t.overview},r.a.createElement(A,{className:"btn btn-success",onClick:function(){return e.saveShow(t.id,t.name,t.poster_path,t.overview)}},"Add to Watch List"))}))}}]),t}(n.Component);a(76);var G=function(e){return r.a.createElement("form",{className:"search text-center container"},r.a.createElement("label",{htmlFor:"showSearch"},"Search For a TV Show:"),r.a.createElement("input",{value:e.query,onChange:e.handleInputChange,name:"showSearch",type:"text",className:"form-control search-input",placeholder:"Search by Show Name"}),r.a.createElement("button",{type:"submit",onClick:e.handleSearchSubmit,className:"btn btn-white text-dark search-btn"},"Search"))},P=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",shows:[]},a.handleInputChange=function(e){a.setState({query:e.target.value})},a.handleSearchSubmit=function(e){e.preventDefault(),R.searchShows(a.state.query).then(function(e){return a.setState({shows:e.results,query:""})}).catch(function(e){return console.log(e)})},a.saveShow=function(e,t,a,n){C.saveShow(N,{id:e,name:t,poster:a,summary:n}).then(R.getImdbID(e)).catch(function(e){return console.log(e)})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(G,{query:this.state.query,handleInputChange:this.handleInputChange,handleSearchSubmit:this.handleSearchSubmit}),this.state.shows.map(function(t){return r.a.createElement(L,{key:t.id,id:t.id,name:t.name,poster:t.poster_path,summary:t.overview},r.a.createElement(A,{className:"btn btn-success",onClick:function(){return e.saveShow(t.id,t.name,t.poster_path,t.overview)}},"Add to Watch List"))}))}}]),t}(n.Component),q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={shows:[]},a.loadWatchList=function(){C.getWatchList(N).then(function(e){return a.setState({shows:e.data.watchList})}).catch(function(e){return console.log(e)})},a.deleteShow=function(e){C.deleteShow(N,e).then(function(e){return a.loadWatchList()}).catch(function(e){return console.log(e)})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadWatchList()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.shows.map(function(t){return r.a.createElement(L,{key:t.id,id:t.id,name:t.name,poster:t.poster,summary:t.summary},r.a.createElement(A,{className:"btn btn-danger",onClick:function(){return e.deleteShow(t._id)}},"Remove"),r.a.createElement(A,{className:"btn btn-info"},r.a.createElement(E.a,{className:"text-white",to:"/api/users/showdetails/"+t.id},"View More")))}))}}]),t}(n.Component);a(78);var M=function(){return r.a.createElement("div",{id:"home",className:"bg-dark"},r.a.createElement(w,null),r.a.createElement("div",{className:"text-center bg-dark"},r.a.createElement("button",{className:"btn btn-lg bg-white"},r.a.createElement(E.a,{to:"/login"},r.a.createElement("span",{className:"text-dark"},"Login"))),r.a.createElement("button",{className:"btn btn-lg bg-white"},r.a.createElement(E.a,{to:"/register"},r.a.createElement("span",{className:"text-dark"},"Register")))))},_=(a(80),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",{className:"bg-dark"},r.a.createElement(v,{className:"App-header"}),r.a.createElement(p.a,null,r.a.createElement(f.a,{exact:!0,path:"/",component:M}),r.a.createElement(f.a,{exact:!0,path:"/login",component:j}),r.a.createElement(f.a,{exact:!0,path:"/register",component:S}),r.a.createElement(B,{exact:!0,path:"/trending",component:D}),r.a.createElement(B,{exact:!0,path:"/search",component:P}),r.a.createElement(B,{exact:!0,path:"/watchlist",component:q}))))}}]),t}(r.a.Component)),B=function(e){var t=e.component,a=Object(s.a)(e,["component"]);return r.a.createElement(f.a,Object.assign({},a,{render:function(e){return b.isAuthenticated?r.a.createElement(t,e):r.a.createElement(g.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},F=_;o.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[25,2,1]]]);
//# sourceMappingURL=main.6ef7c16b.chunk.js.map