(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(80)},33:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},74:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),o=a.n(c),s=(a(33),a(26)),i=a(85),l=a(87),u=a(83),m=a(86),h=a(84),d={isAuthenticated:!1,authenticate:function(e){var t=this;fetch("api/users/user",{credentials:"include"}).then(function(a){t.isAuthenticated=!0,"function"===typeof e&&e(a.json().user)}).catch(function(e){console.log("Error fetching authorized user.")})},signout:function(e){var t=this;fetch("api/users/logout",{method:"POST",credentials:"include"}).then(function(a){t.isAuthenticated=!1,"function"===typeof e&&e(!0)}).catch(function(t){console.log("Error logging out user."),"function"===typeof e&&e(!1)})}};a(35);var p=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-white text-dark"},r.a.createElement("span",{className:"text-left mr-5 pr-5"},r.a.createElement("a",{className:"navbar-brand text-danger",href:"/"},r.a.createElement("span",{className:"logo-1"},"MW"),"atch",r.a.createElement("span",{className:"logo-2"}))),r.a.createElement("span",{className:"ml-5 pl-5"},r.a.createElement("a",{className:"navbar-brand text-dark float-right",href:"/trending"},"Trending"),r.a.createElement("a",{className:"navbar-brand text-dark float-right",href:"/watchlist"},"Watch List"),r.a.createElement("a",{className:"navbar-brand text-dark float-right",href:"/search"},"Search")))},f=a(3),g=a(4),b=a(6),E=a(5),v=a(7),y=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onLogin;return r.a.createElement("form",{ref:function(t){return e.form=t},onSubmit:function(a){return a.preventDefault(),t({username:e.usernameElem.value,password:e.passwordElem.value})}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",ref:function(t){return e.usernameElem=t},type:"text",name:"username",placeholder:"Enter Username"}),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",ref:function(t){return e.passwordElem=t},type:"password",name:"password",placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-white text-dark",type:"submit"},"Login")))}}]),t}(r.a.Component);a(37);var w=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"jumbotron bg-dark"},r.a.createElement("h1",{className:"text-center text-danger"},r.a.createElement("span",{className:"logo-1"},"MW"),r.a.createElement("span",{className:"logo-2"},"atch"))))},N=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={redirectToReferrer:!1,username:""},a.login=function(e){console.log("Logging in "+e.username),a.setState({username:e.username}),fetch("api/users/login",{method:"POST",body:JSON.stringify(e),credentials:"include",headers:{"Content-Type":"application/json"}}).then(function(e){200===e.status&&d.authenticate(function(){a.setState({redirectToReferrer:!0})})}).catch(function(e){console.log("Error logging in.",e)})},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/trending"}}).from;return this.state.redirectToReferrer?r.a.createElement(h.a,{to:e}):r.a.createElement("div",null,r.a.createElement("p",null,"You must log in to view the page at ",e.pathname),r.a.createElement(w,null),r.a.createElement(y,{onLogin:this.login}))}}]),t}(r.a.Component),S=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.onRegister;return console.log("Register form props are: ".concat(JSON.stringify(this.props))),r.a.createElement("form",{ref:function(t){return e.form=t},onSubmit:function(a){return a.preventDefault(),t({username:e.usernameElem.value,password:e.passwordElem.value})}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",ref:function(t){return e.usernameElem=t},type:"text",name:"username",placeholder:"Enter Username"}),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",ref:function(t){return e.passwordElem=t},type:"password",name:"password",placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-white text-dark",type:"submit"},"Register")))}}]),t}(r.a.Component),j=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={redirectToReferrer:!1,username:""},a.register=function(e){console.log("Signing up "+e.username),a.setState({username:e.username}),fetch("api/users/register",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){200===e.status&&(console.log("Succesfully registered user!"),d.authenticate(function(){a.setState({redirectToReferrer:!0})}))}).catch(function(e){console.log("Error registering user.",e)})},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/trending"}}).from;return this.state.redirectToReferrer?r.a.createElement(h.a,{to:e}):r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement("h4",null,"Register a New User"),r.a.createElement(S,{onRegister:this.register}))}}]),t}(r.a.Component),O=new(a(42))("0faa87ddbbef0c9919c7bc4cce783c37"),k=a(12),x={searchShows:function(e){return O.searchTv({query:e}).catch(console.error)},trendingGenre:function(e){return O.discoverTv({with_genres:e,page:1}).catch(console.error)},getImdbID:function(e){return O.tvExternalIds({id:e}).catch(console.error)},getImdbInfo:function(e){return k({method:"GET",url:"https://movie-database-imdb-alternative.p.rapidapi.com/",headers:{"content-type":"application/octet-stream","x-rapidapi-host":"movie-database-imdb-alternative.p.rapidapi.com","x-rapidapi-key":"a2f015a678msh2a0ce21581b9776p142941jsn5041963e7f65"},params:{i:e,r:"json"}}).catch(function(e){console.log(e)})}},C=a(12),T=a.n(C),A={saveShow:function(e){return T.a.post("/api/users/watchlist",e).then(console.log(e))},getWatchList:function(e){return T.a.get("/api/users/"+e)},deleteShow:function(e){return T.a.delete("/api/users/watchlist/"+e)}};a(74);var L=function(e){return r.a.createElement("button",Object.assign({},e,{role:"button",tabIndex:"0"}))};a(76);var R=function(e){return r.a.createElement("div",{className:"card mb-3"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},r.a.createElement("strong",null,e.name)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-3 text-center"},r.a.createElement("img",{src:e.poster?"http://image.tmdb.org/t/p/original".concat(e.poster):"http://www.salasardyechem.com/img/not-available.jpg",alt:"Show Poster"})),r.a.createElement("div",{className:"col-12 col-lg-9"},r.a.createElement("p",{className:"card-text"},e.summary),e.children))))};var I=function(e){return r.a.createElement("button",{onClick:function(){return e.searchByGenre(e.id)},className:"genre-btn btn btn-primary","data-id":e.id,role:"button",tabIndex:"0"},e.name)};var W=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary"})},q=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={shows:[],genres:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],username:""},a.saveShow=function(e,t,a,n){A.saveShow({id:e,name:t,poster:a,summary:n}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})},a.searchByGenre=function(e){console.log("searching genre"),x.trendingGenre(e).then(function(e){console.log(e.results),a.setState({shows:e.results})}).catch(function(e){return console.log(e)})},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props.match.params.username),this.setState({username:this.props.match.params.username}),this.searchByGenre()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(W,{username:this.state.username}),r.a.createElement("h1",null,"Trending Now"),this.state.genres.map(function(t){return r.a.createElement(I,{searchByGenre:e.searchByGenre,key:t.id,id:t.id,name:t.name})}),this.state.shows.map(function(t){return r.a.createElement(R,{key:t.id,id:t.id,name:t.name,poster:t.poster_path,summary:t.overview},r.a.createElement(L,{className:"btn btn-success",onClick:function(){return e.saveShow(t.id,t.name,t.poster_path,t.overview)}},"Add to Watch List"))}))}}]),t}(n.Component);var D=function(e){return r.a.createElement("form",{className:"search text-center"},r.a.createElement("label",{htmlFor:"showSearch"},"Search For a TV Show:"),r.a.createElement("input",{value:e.query,onChange:e.handleInputChange,name:"showSearch",type:"text",className:"form-control",placeholder:"Search by Show Name"}),r.a.createElement("button",{type:"submit",onClick:e.handleSearchSubmit,className:"btn btn-secondary"},"Search"))},G=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",shows:[]},a.handleInputChange=function(e){a.setState({query:e.target.value})},a.handleSearchSubmit=function(e){e.preventDefault(),x.searchShows(a.state.query).then(function(e){return a.setState({shows:e.results,query:""})}).catch(function(e){return console.log(e)})},a.saveShow=function(e,t,a,n){A.saveShow({id:e,name:t,poster:a,summary:n}).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement(D,{query:this.state.query,handleInputChange:this.handleInputChange,handleSearchSubmit:this.handleSearchSubmit}),this.state.shows.map(function(t){return r.a.createElement(R,{key:t.id,id:t.id,name:t.name,poster:t.poster_path,summary:t.overview},r.a.createElement(L,{className:"btn btn-success",onClick:function(){return e.saveShow(t.id,t.name,t.poster_path,t.overview)}},"Add to Watch List"))}))}}]),t}(n.Component),M=a(82),B=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={shows:[],username:"michelle"},a.loadWatchList=function(){A.getWatchList(a.state.username).then(function(e){return a.setState({shows:e.data.watchList})}).catch(function(e){return console.log(e)})},a.deleteShow=function(e){A.deleteShow(e).then(function(e){return a.loadWatchList()}).catch(function(e){return console.log(e)})},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.loadWatchList()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(W,null),this.state.shows.map(function(t){return r.a.createElement(R,{key:t.id,id:t.id,name:t.name,poster:t.poster,summary:t.summary},r.a.createElement(L,{className:"btn btn-danger",onClick:function(){return e.deleteShow(t._id)}},"Remove"),r.a.createElement(L,{className:"btn btn-info"},r.a.createElement(M.a,{className:"text-white",to:"/api/users/showdetails/"+t.id},"View More")))}))}}]),t}(n.Component);var P=function(){return r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement("h3",null),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{className:"btn btn-lg bg-white"},r.a.createElement(M.a,{to:"/login"},r.a.createElement("span",{className:"text-dark"},"Login"))),r.a.createElement("button",{className:"btn btn-lg bg-white"},r.a.createElement(M.a,{to:"/register"},r.a.createElement("span",{className:"text-dark"},"Register")))))},_=(a(78),Object(m.a)(function(e){var t=e.history;return d.isAuthenticated?r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"Success! You are Logged In!"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){d.signout(function(){return t.push("/")})}},"Sign out")):r.a.createElement("p",null,"You are not logged in.")})),F=function(e){var t=e.component,a=Object(s.a)(e,["component"]);return r.a.createElement(u.a,Object.assign({},a,{render:function(e){return d.isAuthenticated?r.a.createElement(t,e):r.a.createElement(h.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},J=function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"bg-dark"},r.a.createElement(p,{className:"App-header"}),r.a.createElement(_,null),r.a.createElement(l.a,null,r.a.createElement(u.a,{exact:!0,path:"/",component:P}),r.a.createElement(u.a,{exact:!0,path:"/login",component:N}),r.a.createElement(u.a,{exact:!0,path:"/register",component:j}),r.a.createElement(F,{exact:!0,path:"/trending",component:q}),r.a.createElement(F,{exact:!0,path:"/search",component:G}),r.a.createElement(F,{exact:!0,path:"/watchlist",component:B}))))};o.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[27,2,1]]]);
//# sourceMappingURL=main.9d7f7a1e.chunk.js.map